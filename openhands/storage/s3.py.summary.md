# S3 Storage (s3.py)

This module implements Amazon S3 storage integration for the OpenHands framework, providing cloud-based object storage capabilities.

## Key Features

### S3 Operations
- Bucket management
- Object operations
- Multipart uploads
- Versioning
- Access control

### Storage Features
- File upload/download
- Stream handling
- Metadata management
- Lifecycle policies
- Storage classes

### Configuration
- AWS credentials
- Region settings
- Bucket policies
- Encryption
- Access points

## Implementation Details

### Core Operations
1. Upload Operations
   - Single uploads
   - Multipart uploads
   - Stream uploads
   - Progress tracking
   - Retry logic

2. Download Operations
   - File downloads
   - Stream downloads
   - Range requests
   - Conditional gets
   - Transfer acceleration

3. Management Operations
   - Object listing
   - Metadata handling
   - Versioning control
   - Lifecycle rules
   - Tag management

### Integration Points
- Works with FileStore
- Supports ConversationStore
- Backup storage
- Resource management
- CDN integration

## Usage Patterns

### Basic Operations
```python
store = S3Storage(bucket="my-bucket")
store.upload_file("local/path", "s3/path")
store.download_file("s3/path", "local/path")
```

### Advanced Features
```python
# With metadata
store.upload_with_metadata("path", {
    "ContentType": "application/json",
    "CacheControl": "max-age=3600"
})

# Multipart upload
with store.multipart_upload("large-file") as upload:
    upload.upload_part(data)
```

## Error Handling
- Network errors
- Authentication failures
- Quota limits
- Access denied
- Timeout handling

## Security Features
- IAM integration
- Server-side encryption
- Client-side encryption
- Bucket policies
- Access points

## Performance Optimization
1. Transfer
   - Multipart uploads
   - Transfer acceleration
   - Parallel operations
   - Connection pooling
   - Request batching

2. Caching
   - Object caching
   - Metadata caching
   - DNS resolution
   - Connection reuse
   - Response caching

## Configuration Options
```python
config = {
    "bucket": "my-bucket",
    "region": "us-east-1",
    "storage_class": "STANDARD",
    "encryption": "AES256"
}
```

## Best Practices
1. Error Handling
   - Implement retries
   - Handle timeouts
   - Log operations
   - Monitor quotas
   - Validate inputs

2. Performance
   - Use appropriate storage classes
   - Implement caching
   - Optimize transfers
   - Batch operations
   - Monitor metrics

3. Security
   - Minimal permissions
   - Encrypt data
   - Secure credentials
   - Regular audits
   - Access logging